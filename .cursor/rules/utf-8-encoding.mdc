---
description: 项目统一使用 UTF-8 编码，终端与脚本输出需为 UTF-8 以正确显示中文路径与日志
alwaysApply: true
---

# 统一使用 UTF-8

## 要求

- **脚本**：入口脚本已设置 `sys.stdout.reconfigure(encoding="utf-8")` 与 `sys.stderr.reconfigure(encoding="utf-8")`，保证 print 与异常信息为 UTF-8。
- **文件读写**：读写 JSON、文本时使用 `encoding="utf-8"`（如 `state_manager` 已统一）。
- **终端**：在 Cursor / VS Code 中运行脚本时，终端应使用 UTF-8，以便：
  - 正确显示中文日志与错误信息
  - 正确传递中文路径参数（若从命令行传入）

## 在 PowerShell 中临时设为 UTF-8（可选）

若在系统 PowerShell 中运行脚本且出现中文乱码，可先执行：

```powershell
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
$OutputEncoding = [System.Text.Encoding]::UTF8
chcp 65001
```

## 已应用 UTF-8 的脚本

- `scripts/run_multi_pet_with_circle_text.py`
- `scripts/add_circle_text.py`
- `scripts/run_agent.py`
- `scripts/run_multi_pet_task.py`
- `scripts/run_circle_text_layout.py`
- `scripts/run_multi_pet_matting.py`
- `scripts/run_multi_pet_composition.py`
